---
title: å¦‚ä½•åœ¨ä¸¤ä¸ªç›¸å…³æ³›å‹ç±»ä¹‹é—´åˆ›å»ºç±»ä¼¼å­ç±»å‹çš„å…³ç³»
icon: java
order: 12
category:
  - java
tag:
  - æ³›å‹
  - å­ç±»å‹

---

äº‹æƒ…æ˜¯è¿™ä¸ªæ ·å­çš„......

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b5bab17412245cfafb4d3d5223ca4b6~tplv-k3u1fbpfcp-zoom-1.image)

å¯¹è¯ä¸­çš„æˆªå›¾å¦‚ä¸‹ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fb28db5ecda44be6999cd38a0d0a67f4~tplv-k3u1fbpfcp-zoom-1.image)

çœ‹äº†é˜¿Qçš„è§£é‡Šï¼Œä½ æ˜¯å¦ä¹Ÿå’Œâ€œé©¬å°è·³â€ä¸€æ ·å­˜åœ¨ç–‘é—®å‘¢ï¼Ÿè¯·å¾€ğŸ‘‡çœ‹

æˆ‘ä»¬éƒ½çŸ¥é“åœ¨`java`ä¸­ï¼Œåªè¦æ˜¯ç±»å‹å…¼å®¹ï¼Œå°±å¯ä»¥å°†ä¸€ç§ç±»å‹çš„å¯¹è±¡åˆ†é…ç»™å¦ä¸€ç§ç±»å‹çš„å¯¹è±¡ã€‚æ¯”å¦‚å¯ä»¥å°†ä¸€ä¸ª`Integer`ç±»å‹çš„å¯¹è±¡åˆ†é…ç»™`Object`ç±»å‹çš„å¯¹è±¡ï¼Œå› ä¸º`Object` æ˜¯`Integer`çš„è¶…ç±»ã€‚

```java
Object someObject = new Object();
Integer someInteger = new Integer(10);
someObject = someInteger; //OK
```

åœ¨é¢å‘å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬æŠŠå®ƒç§°ä¹‹ä¸º **is a** çš„å…³ç³»ã€‚å› ä¸º`Integer`æ˜¯`Object`çš„ä¸€ç§å­ç±»ï¼Œæ‰€ä»¥å…è®¸è¢«èµ‹å€¼ã€‚

åˆå› ä¸º`Integer`ä¹Ÿæ˜¯`Number`çš„ä¸€ç§å­ç±»ï¼Œæ‰€ä»¥ä¸‹è¾¹çš„ä»£ç ä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼š

```java
public void someMethod(Number n) { /* ... */ }

someMethod(new Integer(10));   // OK
someMethod(new Double(10.1));   // OK
```

å½“ç„¶æ³›å‹ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåœ¨æ‰§è¡Œæ³›å‹ç±»å‹è°ƒç”¨æ—¶ï¼Œå°†`Number`ä½œä¸ºå…¶ç±»å‹å‚æ•°ä¼ é€’ï¼Œå¦‚æœå‚æ•°æ˜¯`Number`çš„å­ç±»å‹ï¼Œåˆ™å…è®¸ä»»ä½•åç»­çš„`add`è°ƒç”¨:

```java
Box<Number> box = new Box<Number>();
box.add(new Integer(10));   // OK
box.add(new Double(10.1));  // OK
```

ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ä»£ç ï¼š

```java
public void boxTest(Box<Number> n) { /* ... */ }
```

è¯¥æ–¹æ³•æ¥æ”¶ä»€ä¹ˆç±»å‹çš„å‚æ•°å‘¢ï¼Ÿ

é€šè¿‡è¯¥æ–¹æ³•ï¼Œå¤§å®¶è‚¯å®šçŸ¥é“å®ƒçš„å‚æ•°ç±»å‹ä¸º`Box<Number>`ï¼Œä½†æ˜¯å¤§å®¶æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä½ è®¤ä¸º`Box<Integer>` å’Œ`Box<Double>`ç±»å‹çš„å‚æ•°å¯ä»¥ä¼ å…¥å—ï¼Ÿ

ç­”æ¡ˆæ˜¯**å¦å®š**çš„ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f880f9c9d60a4738b29db61689372d83~tplv-k3u1fbpfcp-zoom-1.image)


å°½ç®¡`Integer`æ˜¯`Number`çš„å­ç±»å‹ï¼Œä½†`Box<Integer>` å’Œ`Box<Double>`ä¸æ˜¯`Box<Number>`çš„å­ç±»ï¼Œå®ƒä¿©çš„çˆ¶ç±»å¯¹è±¡æ˜¯`Object`ã€‚**æ–‡é¦–çš„å¯¹è¯è¡¨è¾¾çš„å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚**

é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå½“ç±»çš„æ³›å‹ç›¸å…³æ—¶ï¼Œå¦‚ä½•åœ¨ä¸¤ä¸ªæ³›å‹ç±»ä¹‹é—´åˆ›å»ºç±»ä¼¼å­ç±»å‹çš„å…³ç³»å‘¢ï¼Ÿä¾‹å¦‚å¦‚ä½•è®©`Box<Integer>` å’Œ`Box<Double>`å˜å¾—ä¸`Box<Number>`æœ‰å…³å‘¢ï¼Ÿ

ä¸ºäº†ææ‡‚è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹åŒä¸€ç±»å‹çš„å¯¹è±¡æ˜¯å¦‚ä½•å®ç°å­ç±»å‹åŒ–çš„å§ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f3e059d672f492fb106a496366bf155~tplv-k3u1fbpfcp-zoom-1.image)


é€šè¿‡åˆ†ææºç æˆ‘ä»¬å¯ä»¥å‘ç°ï¼š`ArrayList<E>` å®ç°äº† `List<E>`ï¼Œ`List<E>` ç»§æ‰¿äº†`Collection<E>`ï¼Œæ‰€ä»¥`ArrayList<String>`æ˜¯`List<String>`çš„å­ç±»å‹ï¼Œ `List<String>`æ˜¯ `Collection<String>`çš„å­ç±»å‹ã€‚å› æ­¤å½“æˆ‘ä»¬åœ¨ä¼ é€’å‚æ•°æ—¶ï¼Œ`ArrayList<String>`ç±»å‹çš„æ˜¯å¯ä»¥ç»™`List<E>`æˆ–è€…`Collection<E>`ä¼ é€’çš„ã€‚

> åªè¦ä¸æ”¹å˜ç±»å‹å‚æ•°ï¼Œç±»å‹ä¹‹é—´çš„å­ç±»å‹å…³ç³»å°±ä¼šä¿ç•™ã€‚

å¦‚æœæˆ‘ä»¬æƒ³è¦å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„åˆ—è¡¨æ¥å£`PayloadList`ï¼Œä½¿å¾—æ³›å‹ç±»å‹Pçš„å¯é€‰å€¼ä¸æ¯ä¸ªå…ƒç´ ç›¸å…³è”ï¼Œå¯ä»¥å®šä¹‰å¦‚ä¸‹ï¼š

```java
interface PayloadList<E,P> extends List<E> {
  void setPayload(int index, P val);
  ...
}
```
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b1bad5d8a4ac4ed996c0daa2468aed14~tplv-k3u1fbpfcp-zoom-1.image)


åˆ™`PayloadList<String,String>`ã€`PayloadList<String,Integer>`ã€`PayloadList<String,Exception>`éƒ½æ˜¯`List<String>`çš„å­ç±»å‹ã€‚

> å°ç»“ï¼šå¯ä»¥é€šè¿‡ç»§æ‰¿æ³›å‹ç±»æˆ–è€…å®ç°æ¥å£æ¥å¯¹å…¶è¿›è¡Œå­ç±»å‹åŒ–ã€‚

ææ‡‚äº†å­ç±»å‹åŒ–çš„é—®é¢˜ï¼Œæˆ‘ä»¬å›åˆ°â€œå¦‚ä½•åœ¨ä¸¤ä¸ªæ³›å‹ç±»ä¹‹é—´åˆ›å»ºç±»ä¼¼å­ç±»å‹çš„å…³ç³»â€œçš„é—®é¢˜ã€‚

æ³›å‹ç±»æˆ–è€…æ¥å£å¹¶ä¸ä¼šä»…ä»…å› ä¸ºå®ƒä»¬çš„ç±»å‹ä¹‹é—´æœ‰å…³ç³»è€Œå˜å¾—ç›¸å…³ï¼Œå¦‚æœè¦è¾¾åˆ°ç›¸å…³ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨**é€šé…ç¬¦**æ¥åˆ›å»ºæ³›å‹ç±»æˆ–æ¥å£ä¹‹é—´çš„å…³ç³»ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b67e4400b5ba469d94319362c6c164bf~tplv-k3u1fbpfcp-zoom-1.image)


`Box<Integer>` å’Œ`Box<Number>`çš„çˆ¶ç±»å¯¹è±¡å…¶å®æ˜¯`Box<?>`

ä¸ºäº†åœ¨è¿™äº›ç±»ä¹‹é—´åˆ›å»ºå…³ç³»ï¼Œä»¥ä¾¿ä»£ç å¯ä»¥é€šè¿‡`Box<Integer>`è®¿é—®`Box<Number>`çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šé™é€šé…ç¬¦:

```java
Box<? extends Integer> initBox = new Box<>();
Box<? extends Number> numberBox = initBox;
// OK. Box<? extends Integer> is a subtype of Box<? extends Number>
```

å› ä¸º`Integer`æ˜¯`Number`çš„å­ç±»å‹ï¼Œ`numberBox`çš„æ³›å‹æ˜¯`Number`å¯¹è±¡å­ç±»ï¼Œæ‰€ä»¥åœ¨`intBox`å’Œ`numberBox`ä¹‹é—´å­˜åœ¨å…³ç³»ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b15f428724d54069a75a185097e094d7~tplv-k3u1fbpfcp-zoom-1.image)


å›¾ä¸ºç”¨**ä¸Šé™**å’Œ**ä¸‹é™**é€šé…ç¬¦å£°æ˜çš„å‡ ä¸ªç±»ä¹‹é—´çš„å…³ç³»ã€‚
